# üéØ FaceSharp (—Ä–∞–±–æ—á–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)

–°–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —á—ë—Ç–∫–æ—Å—Ç—å –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Å–∏ –ª–∏—Ü–∞ (—Å–≤–µ—Ç, –ø–æ–∑–∞, –ª–∏–Ω–∏—è —á–µ–ª—é—Å—Ç–∏), –∞ —Å–≤–µ—Ä—Ö—É –≤—ã–¥–∞—ë—Ç –º–µ–º-–∫–ª–∞—Å—Å: "mogged / sigma / meh". –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–µ–ª—Ñ–∏-–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –±—Ä–∞–∫-–∫–∞–¥—Ä–æ–≤ –∏ —Ñ–∞–Ω–æ–≤–æ—ó –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

- **–ò–∑–º–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ**: —Ä–µ–∑–∫–æ—Å—Ç—å (Laplacian/Tenengrad/FFT), –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç, —ç–∫—Å–ø–æ–∑–∏—Ü–∏—é, —à—É–º, –±—ç–∫–≥—Ä–∞—É–Ω–¥-–±–æ–∫–µ
- **–ü–æ–Ω–∏–º–∞–µ—Ç –ª–∏—Ü–æ**: landmarks ‚Üí –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ (—Å–∫—É–ª—ã/—á–µ–ª—é—Å—Ç—å/–≥–ª–∞–∑–∞), —É–≥–æ–ª —á–µ–ª—é—Å—Ç–∏, yaw/pitch/roll, –æ–∫–∫–ª—é–∑–∏–∏ (–æ—á–∫–∏/–º–∞—Å–∫–∞/—Ä—É–∫–∞)
- **–î–∞—ë—Ç –æ—Å–∏ (0‚Äì100)**: sharpness, lighting, pose, jawline, contrast
- **–ú–µ–º-–ª–µ–π–±–ª**: rule-based –∏–ª–∏ ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ –æ—Å—è–º + —ç–º–±–µ–¥–¥–∏–Ω–≥—É (CLIP/ArcFace): mogged / sigma / meh
- **–ü–æ—è—Å–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: —Ç–æ–ø-—Ñ–∞–∫—Ç–æ—Ä—ã, —Å–Ω–∏–∂–∞—é—â–∏–µ/–ø–æ–≤—ã—à–∞—é—â–∏–µ —Å–∫–æ—Ä, –∏ –º–∏–Ω–∏-heatmap —Ä–µ–∑–∫–æ—Å—Ç–∏
- **–†–∞–±–æ—Ç–∞–µ—Ç on-device –∏–ª–∏ —á–µ—Ä–µ–∑ API**: –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (Python/FastAPI) works
- **Face Detection**: MediaPipe Face Detection + Face Mesh
- **Quality Metrics**: Laplacian, Tenengrad, FFT, RMS Contrast, Exposure
- **Geometry Analysis**: Pose estimation, jawline angle, proportions
- **Meme Classifier**: Rule-based (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ ML)

### Frontend (React) todo
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–µ–π (Radar chart)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –ø—Ä–∏—á–∏–Ω

### iOS App (SwiftUI) todo
- –í—ã–±–æ—Ä —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ –∏–ª–∏ –∫–∞–º–µ—Ä–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API
- –ö—Ä–∞—Å–∏–≤—ã–π UI —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ Python 3.10+
- pip 24.0+

### Backend

```bash
# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å Python 3.12
python3.12 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# –û–±–Ω–æ–≤–∏—Ç—å pip
pip install --upgrade pip

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å API
cd api
python main.py
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü—Ä–æ–µ–∫—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è Python 3.12. –°–º. `PYTHON312_NOTES.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`

### Frontend

```bash
cd frontend
npm install
npm run dev
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3000`

### iOS App

1. –û—Ç–∫—Ä–æ–π—Ç–µ `ios/FaceSharp.xcodeproj` –≤ Xcode
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API URL –≤ `FaceAnalysisViewModel.swift` (–∏–∑–º–µ–Ω–∏—Ç–µ `apiURL`)
3. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π IP –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤–º–µ—Å—Ç–æ `localhost`
4. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

## API Endpoints

### POST `/analyze`
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

**Request**: multipart/form-data —Å –ø–æ–ª–µ–º `file`

**Response**:
```json
{
  "ok": true,
  "axes": {
    "sharpness": 78,
    "lighting": 63,
    "pose": 84,
    "jawline": 72,
    "contrast": 69
  },
  "label": "sigma",
  "confidence": 0.81,
  "reasons": [
    "—Ö–æ—Ä–æ—à–∞—è —Ä–µ–∑–∫–æ—Å—Ç—å –ø–æ –≥–ª–∞–∑–∞–º",
    "—É–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –≥–æ–ª–æ–≤—ã (yaw‚âà12¬∞)",
    "–Ω–µ–¥–æ—ç–∫—Å–ø–æ–∑–∏—Ü–∏—è –ø–æ —Ñ–æ–Ω—É (‚àí8)"
  ],
  "abstain": false,
  "model_version": "1.0.0"
}
```

### POST `/analyze/batch`
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–∞–π–ø–ª–∞–π–Ω)

1. **–î–µ—Ç–µ–∫—Ü–∏—è + –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ª–∏—Ü–∞** (RetinaFace/Mediapipe, 5-—Ç–æ—á–µ–∫ ‚Üí similarity transform)
2. **–ö–∞—á–µ—Å—Ç–≤–æ**: Laplacian/Tenengrad, FFT high-freq ratio, RMS-–∫–æ–Ω—Ç—Ä–∞—Å—Ç, —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è, –ª–æ–∫–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã —Ä–µ–∑–∫–æ—Å—Ç–∏
3. **–ì–µ–æ–º–µ—Ç—Ä–∏—è**: 468-—Ç–æ—á–µ–∫ (FaceMesh) ‚Üí –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏/–æ—Ç–Ω–æ—à–µ–Ω–∏—è, —É–≥–æ–ª —á–µ–ª—é—Å—Ç–∏, –ø–æ–∑–∞, –æ–∫–∫–ª—é–∑–∏–∏
4. **–≠–º–±–µ–¥–¥–∏–Ω–≥** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): CLIP –∏–ª–∏ ArcFace
5. **–°–∫–æ—Ä–∏–Ω–≥**: –æ—Å–∏ 0‚Äì100 + –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏; –ø—Ä–∞–≤–∏–ª–æ –∏–ª–∏ ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—ã–¥–∞—ë—Ç mogged/sigma/meh
6. **–≠–∫—Å–ø–ª–µ–π–Ω**: –ø—Ä–∏—á–∏–Ω—ã –∏ —Å–æ–≤–µ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¥–æ–±–∞–≤—å —Å–≤–µ—Ç–∞ —Å–ª–µ–≤–∞", "—Å–º–æ—Ç—Ä–∏ –≤ –∫–∞–º–µ—Ä—É")

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
FaceSharp/
‚îú‚îÄ‚îÄ api/                 # FastAPI backend
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ src/                 # Core analysis modules
‚îÇ   ‚îú‚îÄ‚îÄ face_detection.py
‚îÇ   ‚îú‚îÄ‚îÄ quality_metrics.py
‚îÇ   ‚îú‚îÄ‚îÄ geometry_analysis.py
‚îÇ   ‚îú‚îÄ‚îÄ meme_classifier.py
‚îÇ   ‚îî‚îÄ‚îÄ face_analyzer.py
‚îú‚îÄ‚îÄ frontend/            # React frontend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ ios/                 # iOS SwiftUI app
‚îÇ   ‚îî‚îÄ‚îÄ FaceSharp/
‚îî‚îÄ‚îÄ requirements.txt
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **CV/ML**: OpenCV, Mediapipe (Face Detection/Mesh), PyTorch, open-clip
- **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä**: Logistic Regression / Linear SVM –ø–æ concat(—ç–º–±–µ–¥–¥–∏–Ω–≥, —Ä–µ–∑–∫–æ—Å—Ç—å, –≥–µ–æ–º–µ—Ç—Ä–∏—è), –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
- **API**: FastAPI/ONNX Runtime; –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ WebAssembly/TF.js –¥–ª—è –æ–Ω-–¥–µ–≤–∞–π—Å —Ä–µ–∂–∏–º–∞
- **–§—Ä–æ–Ω—Ç**: React (progress-–±–∞—Ä—ã –æ—Å–µ–π, heatmap, —Å–æ–≤–µ—Ç—ã)
- **iOS**: SwiftUI

## –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ —ç—Ç–∏–∫–∞

- –ù–µ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç "–∫—Ä–∞—Å–æ—Ç—É" –∏ –≤–Ω–µ—à–Ω–æ—Å—Ç—å ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –º–µ–º-–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
- –§–æ—Ç–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é; –µ—Å—Ç—å on-device —Ä–µ–∂–∏–º
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π abstain –ø—Ä–∏ –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏/–ø–ª–æ—Ö–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö (—Å–≤–µ—Ç, —Å–∏–ª—å–Ω–∞—è –ø–æ–∑–∞, –æ–∫–∫–ª—é–∑–∏–∏)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —Å—ä—ë–º–∫–∏; –æ—Ç—á—ë—Ç –æ —Ñ–µ–π—Ä–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞—Ö

## –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] Heatmap —Ä–µ–∑–∫–æ—Å—Ç–∏ –ø–æ –∑–æ–Ω–∞–º –ª–∏—Ü–∞, —Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∫–∞–¥—Ä–∞
- [ ] Active learning –≤ UI (–¥–æ—Ä–∞–∑–º–µ—Ç–∫–∞ —Å–ø–æ—Ä–Ω—ã—Ö –∫–µ–π—Å–æ–≤)
- [ ] –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–ø–æ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (TG/Discord-–±–æ—Ç, Chrome-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
- [ ] –¢—é–Ω–∏–Ω–≥ –ø–æ—Ä–æ–≥–æ–≤ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–∞–º–µ—Ä—ã/—Å–æ—Ü—Å–µ—Ç–∏
- [ ] ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ (CLIP/ArcFace)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –û–¥–Ω–æ-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–∏–∑–µ—Ä–∞

"FaceSharp –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —á—ë—Ç–∫–æ—Å—Ç—å –∏ –∫–ª—é—á–µ–≤—ã–µ –æ—Å–∏ –ø–æ—Ä—Ç—Ä–µ—Ç–∞, –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ —É–ª—É—á—à–∏—Ç—å –∫–∞–¥—Ä, –∏ ‚Äî —Ä–∞–¥–∏ —Ñ–∞–Ω–∞ ‚Äî –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –º–µ–º-–ª–µ–π–±–ª 'mogged / sigma / meh'."

